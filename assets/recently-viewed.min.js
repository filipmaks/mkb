!function(){var e={variables:window.themeVariables.variables};const d={addonSection:".dbtfy-recently-viewed__section",addonContainer:".js-recently-viewed-products",addonBarContainer:".js-recently-viewed-bar-products"},a={addonEnabled:"dbtfy-recently-viewed-enabled"};var t=document.querySelector(d.addonSection);if(t){const s=theme.helpers.safelyParseJson(t.dataset.sectionSettings);if(s){const l={...s,rootUrl:e.variables.routes.rootUrl},c=1<l.rootUrl.length?l.rootUrl:"";async function o(){const n=document.querySelector(d.addonContainer),t=document.querySelector(d.addonBarContainer);var e=document.querySelector(".template-product .product.section");const o=e?e.dataset.productHandle:"";var e=await async function(e){if(!e||!e.length)return"";e=e.map(e=>fetch(`${c}/products/${e}?view=recently-viewed&desktopGrid=${l.productsPerRowDesktop}&mobileGrid=`+l.productsPerRowMobile));return Promise.all(e).then(async e=>Promise.all(e.map(e=>e.text()))).then(e=>e)}(i().filter(e=>e!==o).slice(0,l.productsLimit)),r=(r=e)&&r.length?r.map(e=>{return(new DOMParser).parseFromString(e,"text/html").querySelector(".dbtfy-recently-viewed-product .product-item")}):[];r.length&&n&&(r.forEach(e=>{var t=e.dataset.productId;n.querySelector(`.product-item[data-product-id='${t}']`)||n.insertAdjacentElement("beforeend",e)}),document.body.classList.add(a.addonEnabled),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()}),r={name:"enquire",type:"js",src:themeVariables.files.vendors.js.enquire},theme.helpers.loadAsset(r).then(()=>{theme.helpers.loadComponent("slider",()=>{var e=n,t=s;if(t.enableSlider){const o={arrows:t.showArrows,dots:t.showDots,autoplay:t.enableAutoplay,autoplaySpeed:t.autoplaySpeed,slidesToShow:t.slidesToShow,slidesToScroll:1,swipeToSlide:!0,infinite:!1,speed:window.themeVariables.animation.speed},r={...o,slidesToShow:1,centerMode:!0,focusOnSelect:!0,autoplay:!1,infinite:!0,adaptiveHeight:!0};enquire.register(window.themeVariables.breakpoints.md,{match:function(){theme.Slider.init({slider:e,options:o})}}),enquire.register(window.themeVariables.breakpoints["md-max"],{match:function(){theme.Slider.init({slider:e,options:r})}})}})}));e=(r=e)&&r.length?r.map(e=>{return(new DOMParser).parseFromString(e,"text/html").querySelector(".dbtfy-recently-viewed-bar-product")}):[];if(e.length&&t){for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(e=>{t.insertAdjacentElement("beforeend",e)}),document.body.classList.add(a.addonEnabled),theme.helpers.loadComponent("imagesLazyloading",()=>{theme.imagesLazyLoading()})}(r=o)&&((e=i()).includes(r)||e.unshift(r),localStorage.setItem("recently-viewed-products",JSON.stringify(e))),document.dispatchEvent(new CustomEvent("theme:addon:recently-viewed:loaded")),document.dispatchEvent(new CustomEvent("theme:cart:form-override:init")),document.dispatchEvent(new CustomEvent("theme:addon:custom-currencies:convert-prices"))}function i(){var e=localStorage.getItem("recently-viewed-products");return e?JSON.parse(e):[]}o(),document.addEventListener("shopify:section:load",()=>{o()})}}}();