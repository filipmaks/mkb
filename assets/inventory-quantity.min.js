!function(){const s={thresholdQuantity:{addon:window.themeVariables.settings.addons.inventoryQuantity}.addon.thresholdQuantity},h={addonWrapper:".dbtfy-inventory-quantity",quantityItem:".dbtfy-inventory-quantity__item",quantityFieldItem:".dbtfy-inventory-quantity__quantity",lessThreshold:".dbtfy-inventory-quantity__threshold--less",moreThreshold:".dbtfy-inventory-quantity__threshold--more",productSection:".product.section",masterSelect:"[data-product-master-select]",optionSelector:"[data-product-option-selector]",atcButton:"[data-product-add-to-cart]"};document.body.classList.add("dbtfy-inventory-quantity-enabled");var t=document.querySelectorAll(h.addonWrapper);function i(u,e,d){function n(){var t=e.querySelector(h.atcButton);if(t&&t.matches(":disabled"))u.setAttribute("hidden","hidden");else{t=e.querySelector(h.masterSelect);if(t){const a=d?d.id:+t.value;if(a){const o=u.querySelectorAll(h.quantityItem);o.length?(Array.from(o).some(t=>+t.dataset.variantId===a)?u.removeAttribute("hidden"):u.setAttribute("hidden","hidden"),o.forEach(t=>{var e,d,n,i,r;+t.dataset.variantId===a?(e=t.querySelector(h.lessThreshold),d=t.querySelector(h.moreThreshold),n=t.querySelector(h.quantityFieldItem),r=theme.cart.items&&theme.cart.items.reduce((t,e)=>e.id===a?t+e.quantity:t,0),i=s.thresholdQuantity,0<(r=+t.dataset.originQuantity-r)?(n&&(n.innerHTML=r),t.removeAttribute("hidden"),d&&(r<=i?(e.removeAttribute("hidden"),d.setAttribute("hidden","hidden")):(e.setAttribute("hidden","hidden"),d.removeAttribute("hidden")))):(t.setAttribute("hidden","hidden"),1===o.length&&u.setAttribute("hidden","hidden"))):t.setAttribute("hidden","hidden")})):u.setAttribute("hidden","hidden")}}}}function i(){var t=u.querySelectorAll(h.quantityItem);Array.from(t).some(t=>!t.hasAttribute("hidden"))?u.removeAttribute("hidden"):u.setAttribute("hidden","hidden")}theme.isCartLoaded?(n(),i()):document.addEventListener("theme:cart:initially-loaded",t=>{n(),i()})}t.length&&t.forEach(d=>{const n=d.closest(h.productSection);n&&(n.addEventListener("variantChange",t=>{t=t.detail.variant;i(d,n,t)}),i(d,n),document.addEventListener("theme:cart:loaded",(t,e)=>{i(d,n)}))})}();