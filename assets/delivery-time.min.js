!function(){var e={settings:window.themeVariables.settings,strings:window.themeVariables.strings};const Y={months:e.strings.months,weekdays:e.strings.weekdays,timeZone:+e.settings.timeZone},T={addonSection:".dbtfy-delivery-time",item:".dbtfy-delivery-time__item",itemText:".dbtfy-delivery-time__item-text",itemCutoff:".dbtfy-delivery-time__item-cut-off",addonContainer:".dbtfy-delivery-time-container",productJSON:"[data-product-json]"};function t(){var e=document.querySelector(T.addonSection);if(e){const l=e.querySelectorAll(T.item);if(l.length){e=document.querySelectorAll(".product.section");const s={};if(e.forEach(e=>{var t=e.querySelector(T.addonSection),e=e.querySelector(T.productJSON);const r=e?JSON.parse(e.innerHTML):null;if(t&&t.remove(),r){const n=r.handle;l.forEach(a=>{var e=theme.helpers.safelyParseJson(a.dataset.blockSettings);e&&theme.Visibility.check(r,e,()=>{var e,t;e=n,t=a,s[e]?s[e].includes(t)||s[e].push(t):s[e]=[t]})})}}),Object.keys(s).length)for(const[t,l]of Object.entries(s))document.querySelectorAll(`.product.section[data-product-handle="${t}"]`).forEach(e=>{e=e.querySelector(T.addonContainer);if(e){var t=document.createElement("div"),a=(t.classList.add("dbtfy-delivery-time"),l[l.length-1]);if(a){var r=a;if(r){var n,s,o=r.querySelector(T.itemText),i=theme.helpers.safelyParseJson(r.dataset.blockSettings);if(i)r=function(e,t){var a=+e.minDays,r=+e.maxDays;Y.months;return function(e,t,a,r){var n=function(){var e=new Date,t=Y.timeZone/60,e=e.getTimezoneOffset()/60-t;return e}(),e=function(e,t,a,r,n){const s={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},o=[],i=a.excludeDays&&a.excludeDays.split(",").filter(e=>e).map(e=>e.trim().toLowerCase());for(const F in s)i&&i.forEach(e=>{s[F].toLowerCase().includes(e)&&o.push(F)});var l=(new Date).getTime(),d=new Date(l),u=new Date(l+864e5),l=new Date(l+864e7+864e5*t),y=[],r=function(a,r,n){var r=r.querySelector(T.itemCutoff),s=new Date;let o=s.getDate();if(a.showDeliveryCutoffTime&&r){var i=a.cutoffTime;let e,t;t=n%1!=0?(l=(Number(i.substring(0,2))-n)%1,d=60*l,e=Number(i.substring(0,2))-n-l,d):(e=Number(i.substring(0,2))-n,Number(i.substring(3,5))),e<0?e=24+e:24<e&&(e=Number(i.substring(0,2))-n-24,o=s.getDate()+1);var l=i.substring(6),d=`${e}:${t}:`+l,n=new Date(`${s.getFullYear()}-${s.getMonth()+1}-${o} `+d);return r.innerHTML=a.cutoffMessage.replace("{time}",d),s.getTime()>=n}return!1}(a,r,n),c=new Date(l),n=r?new Date(u):new Date(d);let h=0,m=0;t=r?t+1:t;for(var f=n;f<c;f.setDate(f.getDate()+1)){const A=f.getDay();var D,g,b,S,v,p,w,k,M=o&&o.some(e=>+e===A);!M&&h<e&&++h===e&&(D=f.getFullYear(),b=f.getMonth()+1,g=Y.months.full[b],b=Y.months.short[b],v=f.getDay(),S=Y.weekdays.full[v],v=Y.weekdays.short[v],p=f.getDate(),w={},a.showAsDate?(w.startYear=D,w.startDateMonthFull=g,w.startDateMonthShort=b,w.startWeekdayFull=S,w.startWeekdayShort=v,w.startDateDay=p):w.startDateDay=e,y.push(w)),!M&&m<t&&++m===t&&(D=f.getFullYear(),g=f.getMonth()+1,b=Y.months.full[g],S=Y.months.short[g],v=f.getDay(),p=Y.weekdays.full[v],w=Y.weekdays.short[v],M=f.getDate(),k={},a.showAsDate?(k.endYear=D,k.endMonthFull=b,k.endMonthShort=S,k.endWeekdayFull=p,k.endWeekdayShort=w,k.endDateDay=M):k.endDateDay=+a.maxDays,y.push(k))}return y}(e,t,a,r,n),[t,r]=e,n=a.dateFormat,e={"%Y":t.startYear&&t.startYear,"%y":t.startYear&&t.startYear.toString().slice(2),"%B":t.startDateMonthFull&&t.startDateMonthFull,"%b":t.startDateMonthShort&&t.startDateMonthShort,"%A":t.startWeekdayFull&&t.startWeekdayFull,"%a":t.startWeekdayShort&&t.startWeekdayShort,"%d":t.startDateDay&&t.startDateDay},s={"%Y":r.endYear&&r.endYear,"%y":r.endYear&&r.endYear.toString().slice(2),"%B":r.endMonthFull&&r.endMonthFull,"%b":r.endMonthShort&&r.endMonthShort,"%A":r.endWeekdayFull&&r.endWeekdayFull,"%a":r.endWeekdayShort&&r.endWeekdayShort,"%d":r.endDateDay&&r.endDateDay};let o=n,i=n;if(a.showAsDate){for(var[l,d]of Object.entries(e))o=o.replaceAll(l,d);for(var[u,y]of Object.entries(s))i=i.replaceAll(u,y)}else o=t?t.startDateDay:"",i=r?r.endDateDay:"";return o===i?o:[o,i]}(a,r,e,t)}(i,r),Array.isArray(r)?([n,s]=r,o.innerHTML=i.text.replace("{min}",n).replace("{max}",s)):o.innerHTML=i.text.replace("{min}",r)}t.insertAdjacentElement("afterbegin",a),e.insertAdjacentElement("afterbegin",t),e.removeAttribute("hidden")}}})}}}theme.helpers.loadComponent("visibility",()=>{t()}),document.addEventListener("shopify:section:load",()=>{theme.helpers.loadComponent("visibility",()=>{t()})})}();