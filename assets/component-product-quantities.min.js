window.theme=window.theme||{},theme.ProductQuantities=function(){function n(t,e,a){var i;t&&e&&(a=a.selectedOptions[0])&&(i=theme.helpers.safelyParseJson(a.dataset.variantSettings),a=a.hasAttribute("data-remain-qty")?+a.dataset.remainQty:i.productQty,i=+e.value,t=t.querySelector(".product-quantity__button--plus"),0<a?a<=i?(t&&t.setAttribute("disabled","disabled"),e.value=a):t&&t.removeAttribute("disabled"):(e.value=1,t&&t.setAttribute("disabled","disabled")),0==i)&&0<a&&(e.value=1)===a&&t&&t.setAttribute("disabled","disabled")}return{setMaxQuantity:function(t,e,a){t&&e&&a&&(t=a.selectedOptions[0])&&(a=theme.helpers.safelyParseJson(t.dataset.variantSettings),0<(t=t.hasAttribute("data-remain-qty")?+t.dataset.remainQty:+a.productQty)?e&&e.setAttribute("max",t):e&&e.removeAttribute("max"))},checkQuantity:n,setVariantQuantities:async function(t,e,i){var a,r;t&&e&&(a=i.querySelectorAll("option"),r=await theme.ShopifyAPI.getCart(),a.forEach(t=>{var e=theme.helpers.safelyParseJson(t.dataset.variantSettings).productQty;t.setAttribute("data-remain-qty",e)}),r&&r.items.forEach(t=>{var e,a=t.id,t=t.quantity,a=i.querySelector(`option[value='${a}']`);a&&(e=theme.helpers.safelyParseJson(a.dataset.variantSettings).productQty,a.setAttribute("data-remain-qty",e-t))}),n(t,e,i),document.dispatchEvent(new Event("updatedProductRemainingQuantities")))},syncQuantityInputs:function(t){var e=document.querySelector(".template-product"),a=document.querySelector(".product.section");e&&a&&t&&(t.closest(".featured-product")||(a=a.querySelector(".product-quantity__input"),e=e.querySelector(".dbtfy-sticky-addtocart__quantity input"),a&&e&&(t=+t.value,a.value=t,e&&(e.value=t),document.dispatchEvent(new Event("theme:section:product:quantity-sync")))))}}}();